body {
    font-family: 'Inter', sans-serif;
    background-color: #0c0a1a;
    background-image: linear-gradient(rgba(12, 10, 26, 0.85), rgba(12, 10, 26, 1)), url('https://media.istockphoto.com/id/177512311/pt/foto/fundo-de-espa%C3%A7o-com-estrelas-universo-gal%C3%A1xia-e-nebulosa.jpg?s=612x612&w=0&k=20&c=6aPtjOiUeqX9p2X1XtOVWpL-ryyPC0F4knWFVtHg5YU=');
    background-size: cover;
    background-position: center;
    background-attachment: fixed;
}
.font-cinzel {
    font-family: 'Cinzel', serif;
}
.game-container {
    max-width: 800px;
    min-height: 95vh;
    background: rgba(19, 19, 38, 0.85);
    backdrop-filter: blur(10px);
    border: 2px solid #a37b4c;
    box-shadow: 0 0 30px rgba(255, 215, 0, 0.4);
    animation: pulse-glow 4s infinite;
}
.text-glow {
    text-shadow: 0 0 8px rgba(255, 215, 0, 0.6), 0 0 12px rgba(255, 165, 0, 0.4);
}
.btn-primary {
    background: linear-gradient(145deg, #b98b59, #a37b4c);
    color: #ffffff;
    transition: all 0.3s ease;
    border-bottom: 4px solid #7a5c39;
    box-shadow: 0 4px 15px rgba(0,0,0,0.3);
}
.btn-primary:hover {
    background: linear-gradient(145deg, #c99b69, #b38b5c);
    transform: translateY(-3px);
    box-shadow: 0 6px 20px rgba(0,0,0,0.4);
}
.btn-option {
    background-color: rgba(47, 47, 79, 0.7);
    backdrop-filter: blur(4px);
    color: #e0e0e0;
    border: 2px solid #4a4a70;
    transition: all 0.3s ease;
}
.btn-option:hover:not(:disabled) {
    background-color: #4a4a70;
    border-color: #a37b4c;
    transform: translateY(-2px);
}
.btn-option:disabled {
    cursor: not-allowed;
    opacity: 0.7;
}
.btn-option.correct {
    background: linear-gradient(145deg, #28a745, #1e7e34);
    border-color: #1e7e34 !important;
    color: white;
}
.btn-option.wrong {
    background: linear-gradient(145deg, #dc3545, #b02a37);
    border-color: #b02a37 !important;
    color: white;
}
.hp-bar-container {
    background-color: #222;
    border-radius: 9999px;
    overflow: hidden;
    border: 2px solid #111;
    padding: 2px;
}
.hp-bar {
    background: linear-gradient(90deg, #e74c3c, #c0392b);
    height: 100%;
    transition: width 0.5s ease-in-out;
    border-radius: 9999px;
}
.hp-bar-player {
    background: linear-gradient(90deg, #2ecc71, #27ae60);
}
.progress-bar { transition: width 0.5s linear; }

.sprite-container {
    width: 10rem; /* 160px */
    height: 10rem; /* 160px */
    display: flex;
    justify-content: center;
    align-items: center;
    transition: transform 0.2s ease;
}
.sprite-container img {
    width: 100%;
    height: 100%;
    object-fit: contain;
    image-rendering: pixelated;
    filter: drop-shadow(0 4px 8px rgba(0,0,0,0.5));
}
#player-sprite-container {
    transform: scaleX(-1);
}
.sprite-container.hit-effect {
    animation: hitBounce 0.4s ease-out;
}
@keyframes hitBounce {
    0% { transform: translateY(0) scaleX(var(--scale-x, 1)); }
    25% { transform: translateY(-10px) scaleX(var(--scale-x, 1.05)); }
    50% { transform: translateY(0) scaleX(var(--scale-x, 1)); }
    75% { transform: translateY(-5px) scaleX(var(--scale-x, 1.02)); }
    100% { transform: translateY(0) scaleX(var(--scale-x, 1)); }
}

.screen { opacity: 0; transition: opacity 0.5s ease-in-out; will-change: opacity; }
.screen.active { opacity: 1; }
#feedback-text { min-height: 2.5rem; font-size: 1.5rem; font-weight: bold; transition: opacity 0.3s; }

#platformer-canvas {
    background: linear-gradient(#0c0a1a, #1f1b4a);
}

.btn-phase {
    background-color: rgba(20, 20, 40, 0.5);
    border: 1px solid #a37b4c;
    color: #d1d5db;
    padding: 8px 18px; /* Mantive a sua segunda regra, que era melhor */
    border-radius: 8px;
    transition: all 0.3s ease;
    font-family: 'Cinzel', serif;
    font-size: 1rem;
    cursor: pointer;
    flex-grow: 1;
    min-width: 180px;
}

@keyframes shake {
  0% { transform: translate(1px, 1px) rotate(0deg); } 10% { transform: translate(-1px, -2px) rotate(-1deg); } 20% { transform: translate(-3px, 0px) rotate(1deg); } 30% { transform: translate(3px, 2px) rotate(0deg); } 40% { transform: translate(1px, -1px) rotate(1deg); } 50% { transform: translate(-1px, 2px) rotate(-1deg); } 60% { transform: translate(-3px, 1px) rotate(0deg); } 70% { transform: translate(3px, 1px) rotate(-1deg); } 80% { transform: translate(-1px, -1px) rotate(1deg); } 90% { transform: translate(1px, 2px) rotate(0deg); } 100% { transform: translate(1px, -2px) rotate(-1deg); }
}
.shake { animation: shake 0.5s; }

@keyframes pop-in {
  0% { opacity: 0; transform: scale(0.5); } 100% { opacity: 1; transform: scale(1); }
}
.pop-in { animation: pop-in 0.3s ease-out forwards; }

@keyframes pulse-glow {
    0% { box-shadow: 0 0 30px rgba(255, 215, 0, 0.4); } 50% { box-shadow: 0 0 45px rgba(255, 215, 0, 0.7); } 100% { box-shadow: 0 0 30px rgba(255, 215, 0, 0.4); }
}

@keyframes fadeIn {
    from { opacity: 0; transform: translateY(20px); }
    to { opacity: 1; transform: translateY(0); }
}
#epilogue-screen.active {
    animation: fadeIn 0.8s ease-out forwards;
}
.epilogue-sofia-image {
    width: 150px;
    height: 150px;
    background: rgba(255, 255, 255, 0.1);
    border: 3px solid #a37b4c;
    border-radius: 50%;
    padding: 10px;
    box-shadow: 0 0 20px rgba(255, 215, 0, 0.5);
}
.epilogue-sofia-image img {
    width: 100%;
    height: 100%;
    object-fit: contain;
    border-radius: 50%;
}
.memory-game-board {
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    gap: 12px;
    width: 100%;
    max-width: 480px;
    perspective: 1000px;
}

.memory-card {
    background-color: transparent;
    width: 100px; /* <- PROBLEMA AQUI */
    height: 140px; /* <- PROBLEMA AQUI */
    cursor: pointer;
    position: relative;
    transform-style: preserve-3d;
    transition: transform 0.6s;
    border: 2px solid #a37b4c;
    border-radius: 8px;
}

.memory-card.flipped {
    transform: rotateY(180deg);
}

.memory-card.matched {
    opacity: 0.4;
    cursor: default;
    transform: rotateY(180deg);
}

.card-front,
.card-back {
    position: absolute;
    width: 100%;
    height: 100%;
    backface-visibility: hidden;
    border-radius: 6px;
    display: flex;
    justify-content: center;
    align-items: center;
}

.card-front {
    background-color: #e0d8c7;
    transform: rotateY(180deg);
    padding: 5px;
}

.card-front img {
    width: 100%;
    height: 100%;
    object-fit: cover;
}

.card-back {
    background: linear-gradient(145deg, #5a4b3a, #4a3c2a);
    font-size: 48px;
    color: #a37b4c;
    text-shadow: 0 0 5px rgba(0,0,0,0.5);
}

@keyframes float {
    0% { transform: translateY(0px); }
    50% { transform: translateY(-15px); }
    100% { transform: translateY(0px); }
}

/* ============================================== */
/* === INÍCIO DAS CORREÇÕES PARA RESPONSIVIDADE === */
/* ============================================== */

@media (max-width: 640px) {
    /* Diminui o contêiner do jogo para caber melhor */
    .game-container {
        min-height: 90vh; /* Altura mínima menor */
        padding: 0.75rem; /* Menos padding (o p-4 do html será p-3) */
    }

    /* Diminui os sprites (imagens) do jogador e inimigo na batalha */
    .sprite-container {
        width: 6rem; /* 96px (antes era 10rem / 160px) */
        height: 6rem; /* 96px (antes era 10rem / 160px) */
    }

    /* Ajusta o contêiner dos sprites para a nova altura */
    #character-sprites {
        height: 8rem; /* 128px (antes era 10rem / 160px) */
    }

    /* Ajusta o jogo da memória */
    .memory-game-board {
        gap: 8px; /* Espaço menor entre as cartas */
        max-width: 100%; /* Garante que não vai vazar */
    }

    .memory-card {
        /* Remove o tamanho fixo e faz a carta ser flexível */
        width: 100%; /* Ocupa 100% da coluna do grid */
        height: auto; /* Altura automática */
        aspect-ratio: 10 / 14; /* Mantém a proporção (100 / 140) */
    }

    .card-back {
        /* Diminui o ícone de "?" para caber na carta menor */
        font-size: 2.5rem; /* 40px (antes era 48px) */
    }

    /* Força o canvas do jogo de plataforma a se limitar à largura da tela */
    #platformer-canvas {
        width: 100% !important;
        height: auto !important;
        max-width: 100%;
    }
}
